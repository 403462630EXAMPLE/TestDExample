(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
require("insert-css")(".top{padding:5px;border-bottom:1px solid #cdcdcc}.top .titleLabel{font-size:21px;font-weight:800;margin-top:14px}.top .timeLabel{line-height:24px;font-size:12px;color:#888;display:inline-block}.top .pageView{line-height:24px;color:#888;font-size:12px;float:right;display:inline-block}.content{padding:10px;background-color:#f4f4f4}.content .detail{margin-top:10px;line-height:1.5;font-size:16px}.content .detail img{width:100%}.content .detail p{line-height:1.5;padding-bottom:6px}.content .author{min-height:58px;max-height:70px;background-color:#e2e1e1;border-top:solid 1px #e9e9e9;border-bottom:solid 1px #e9e9e9;position:relative;font-size:14px;overflow:hidden}.content .author .headImg{float:left;margin-top:8px;margin-left:6px;width:44px;height:44px;-webkit-border-radius:22px}.content .author .authorName{zoom:1;overflow:hidden;margin:5px;padding-left:10px;width:auto}.content .author .authorDescription{font-size:11px;color:#888;line-height:14px;margin:0}.go{background-color:#ff6d00;height:40px;font-size:20px;color:#fff;text-align:center;line-height:40px;border-top:1px solid rgba(255,109,0,.6)}.go .refer-1,.go .refer-2,.go .refer-5,.go .refer-8{background-size:auto 100%;background-repeat:no-repeat;background-position-x:100%}.go .refer-1{background-image:url(images/icon_cs.png)}.go .refer-2{background-image:url(images/icon_activity.png)}.go .refer-5{background-image:url(images/icon_account.png)}.go .refer-8{background-image:url(images/icon_live.png)}");
var __vue_template__ = "<div class=\"top\"><div class=\"titleLabel\">{{article.title}}</div><div><div class=\"timeLabel\">{{article.displayTime}}</div><div v-show=\"article.hitCount\" class=\"pageView\">浏览量: {{article.hitCount}}</div></div><div class=\"separatorLine\"></div></div><div class=\"content\"><div class=\"author\"><img src=\"{{article.author.img}}\" class=\"headImg\"><div class=\"authorName\"><span style=\"color:#235382\">{{article.author.name}}</span><div class=\"authorDescription\">{{article.author.desc}}</div></div></div><div class=\"detail\">{{{article.content}}}</div></div><div v-touch=\"tap:onTap\" v-show=\"article.refer\" class=\"go\"> <span class=\"refer-{{article.referenceType}}\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;{{article.refer}}</div><div class=\"foot\"></div>";
var viewModule;

$(function() {
  var testArticle;
  if (env === "development") {
    testArticle = {
      id: 1,
      createTime: 1421207191694,
      updateTime: 1421207191694,
      title: "从改革浪潮中走出的亿万富翁",
      subtitle: "这里是副标题",
      introduction: "这里是摘要",
      content: '<p><span style="color: #ff0000"><strong><span style="font-size: medium">&nbsp;&nbsp;&nbsp; 编者按：从月线看，自去年10月以来，银价已经14个月连续下跌，全段最大跌幅近49.52%，可谓斩腰近半成，今天又到月末，预计白银月线又将收阴。</span></strong></span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp;</span><strong><span style="color: #0000ff"><span style="font-size: medium"> 日内行情：</span></span></strong></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp; 盘中15:30-16:10阶段，现货白银快速拉升近1%，再次回到3900上方，消息面上并没有任何强力支撑白银上涨的理由。稍晚时候公布的欧元区CPI及失业率均好于预期，但白银反应平淡，目前交投于3918附近。</span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp; </span><span style="color: #0000ff"><strong><span style="font-size: medium">数据显示：</span></strong></span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp; 欧元区11月CPI初值月率+0.9%，预期+0.8%，前值+0.7%。</span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp; 欧元区11月核心CPI月率+1.0%，预期+0.9%，前值+0.8%。</span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp; 欧元区10月失业率12.1%，预期12.2%，前值12.2%。</span></p> <p><span style="font-size: medium">&nbsp;&nbsp;</span><span style="color: #0000ff"><strong><span style="font-size: medium">&nbsp; 市场声音：</span></strong></span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp; 近期，美国QE争论未消，欧洲经济问题再起。欧元区经济数据的整体造弱令市场屡屡传出欧央行有机会推行进一步宽松政策，虽之后央行对此进行辟谣，但也显示投资者或并不看好欧洲经济前景。刚出炉的欧元区CPI及失业率数据表现均良好，预计会进一步打消市场对欧元区进一步推行宽松政策的顾虑，提振欧元，利好贵金属。</span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp;</span><span style="color: #ff0000"><span style="font-size: medium"> 欧元区重要数据已公布，晚间无重大数据。</span></span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff"><strong><span style="font-size: medium"> 晚间操作建议：</span></strong></span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp; 因感恩节，北美市场将提前休市，欧元区数据提振市场信心，激进者可于<span style="color: #ff0000"><strong>3905</strong></span>附近轻仓做多，止损<span style="color: #ff0000"><strong>3865</strong></span>，目标<span style="color: #ff0000"><strong>4005</strong></span>。</span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp; </span><span style="color: #ff0000"><span style="font-size: medium">晚间策略，教您把握盈利机会</span></span></p> <p><span style="font-size: medium">&nbsp;&nbsp;&nbsp;</span><span style="background-color: #ccffcc"><span style="color: #ff0000"><strong><span style="font-size: medium"> 温馨提示：以上建议仅供参考。想知道更多具体操作建议的，请进银天下直播室，57专家时刻在线，为您全面解析行情，精确掌握建仓时机，实现您的利润最大化！</span></strong></span></span></p> <p style="text-align: right"><span style="font-size: medium">&nbsp;&nbsp;&nbsp; （编辑/方扬）</span></p>',
      state: "PUBLISHED",
      referenceType: "2",
      referenceId: "195",
      hitCount: 123,
      attributes: {
        key3: "val3",
        key2: "val2",
        key1: "val1"
      },
      publishTime: 1421207191694,
      publishTimeMs: 1421207191694,
      author: {
        id: 1,
        createTime: 1421207191695,
        updateTime: 1421207191695,
        name: "方扬",
        introduction: "自踏入贵金属行业即潜心研究基本面，多年的钻研使得对基本面的分析总结相当独到。",
        attrlogo: "http://www.baidao.com/static/other/user/upload/www/201309/17151140qgqr.jpg"
      },
      columns: [
        {
          id: 1,
          createTime: 1421207191695,
          updateTime: 1421207191695,
          name: "栏目一",
          introduction: "栏目简介",
          remarks: "备注",
          attributes: {
            key3: "val3",
            key2: "val2",
            key1: "val1"
          }
        }
      ],
      tags: [
        {
          id: 1,
          createTime: 1421207191696,
          updateTime: 1421207191696,
          name: "标签一"
        }, {
          id: 2,
          createTime: 1421207191696,
          updateTime: 1421207191696,
          name: "标签二"
        }
      ]
    };
    return setTimeout(function() {
      return window.YTXBridge.fireEvent('ytx:list:refresh', testArticle);
    }, 20);
  }
});

viewModule = {
  created: function() {
    var articleId;
    articleId = getQueryArgByName("id");
    if (articleId) {
      return $.getJSON("" + serviceUrl.mobile_server + "/aggregate/article?id=" + articleId, (function(_this) {
        return function(data) {
          console.log(data);
          _this.handleData(data);
          return renderDownload();
        };
      })(this));
    } else {
      return YTXBridge.addEventListener("ytx:list:refresh", (function(_this) {
        return function(data, callback) {
          _this.handleData(data);
          return typeof callback === "function" ? callback() : void 0;
        };
      })(this));
    }
  },
  attached: function() {
    return this.$el.addEventListener("click", (function(_this) {
      return function(e) {
        var images, img, reference;
        if (e.target.tagName.toUpperCase() !== "IMG") {
          return;
        }
        images = (function() {
          var _i, _len, _ref, _results;
          _ref = this.$el.querySelectorAll(".detail img");
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            img = _ref[_i];
            _results.push(img.src);
          }
          return _results;
        }).call(_this);
        reference = {
          type: 101,
          detail: {
            urls: images,
            index: images.indexOf(e.target.src)
          }
        };
        return YTXBridge.fireEvent("ytx:navigate", reference);
      };
    })(this), false);
  },
  methods: {
    handleData: function(data) {
      ytx.hit(data.id);
      this.article = {
        displayTime: moment(data.publishTimeMs).format('YYYY-MM-DD , H:mm'),
        author: {
          img: data.author.attrlogo,
          name: data.author.name,
          desc: data.author.introduction
        },
        hitCount: data.hitCount,
        title: data.title,
        content: data.content,
        referenceType: data.referenceType
      };
      if (!data.referenceType) {
        return;
      }
      switch (data.referenceType) {
        case "2":
          $.getJSON("" + serviceUrl.mobile_server + "/activity/" + data.referenceId, (function(_this) {
            return function(data) {
              _this.article.referenceData = data;
              return _this.article.refer = data.referenceDesc;
            };
          })(this)).fail(function(data) {
            return alert("获取活动信息失败");
          });
      }
      return this.article.refer = data.referenceDesc;
    },
    onTap: function() {
      var reference, _ref;
      if (!this.article.referenceType) {
        return;
      }
      if (!parseInt(this.article.referenceType)) {
        return;
      }
      reference = {
        type: parseInt(this.article.referenceType),
        detail: (_ref = this.article.referenceData) != null ? _ref : {}
      };
      return YTXBridge.fireEvent("ytx:navigate", reference);
    }
  },
  data: {
    article: {}
  }
};

module.exports = viewModule;

module.exports.template = __vue_template__;

},{"insert-css":3}],2:[function(require,module,exports){
"use strict";
var appOptions;

appOptions = require('./article.vue');

window.onBridgeReady(function() {
  var app;
  return app = new Vue(appOptions).$mount('#app');
});

},{"./article.vue":1}],3:[function(require,module,exports){
var inserted = {};

module.exports = function (css, options) {
    if (inserted[css]) return;
    inserted[css] = true;
    
    var elem = document.createElement('style');
    elem.setAttribute('type', 'text/css');

    if ('textContent' in elem) {
      elem.textContent = css;
    } else {
      elem.styleSheet.cssText = css;
    }
    
    var head = document.getElementsByTagName('head')[0];
    if (options && options.prepend) {
        head.insertBefore(elem, head.childNodes[0]);
    } else {
        head.appendChild(elem);
    }
};

},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9Ub21hcy9kZXZlbG9wbWVudC9yamh5L1l0eEFwcC9Nb2JpbGVXZWJhcHBzL25vZGVfbW9kdWxlcy9ndWxwLWJyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9Ub21hcy9kZXZlbG9wbWVudC9yamh5L1l0eEFwcC9Nb2JpbGVXZWJhcHBzL2FwcC9zY3JpcHRzL2FydGljbGUudnVlIiwiL1VzZXJzL1RvbWFzL2RldmVsb3BtZW50L3JqaHkvWXR4QXBwL01vYmlsZVdlYmFwcHMvYXBwL3NjcmlwdHMvZmFrZV9jZGIyMDBjYS5qcyIsIi9Vc2Vycy9Ub21hcy9kZXZlbG9wbWVudC9yamh5L1l0eEFwcC9Nb2JpbGVXZWJhcHBzL25vZGVfbW9kdWxlcy9pbnNlcnQtY3NzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJyZXF1aXJlKFwiaW5zZXJ0LWNzc1wiKShcIi50b3B7cGFkZGluZzo1cHg7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2NkY2RjY30udG9wIC50aXRsZUxhYmVse2ZvbnQtc2l6ZToyMXB4O2ZvbnQtd2VpZ2h0OjgwMDttYXJnaW4tdG9wOjE0cHh9LnRvcCAudGltZUxhYmVse2xpbmUtaGVpZ2h0OjI0cHg7Zm9udC1zaXplOjEycHg7Y29sb3I6Izg4ODtkaXNwbGF5OmlubGluZS1ibG9ja30udG9wIC5wYWdlVmlld3tsaW5lLWhlaWdodDoyNHB4O2NvbG9yOiM4ODg7Zm9udC1zaXplOjEycHg7ZmxvYXQ6cmlnaHQ7ZGlzcGxheTppbmxpbmUtYmxvY2t9LmNvbnRlbnR7cGFkZGluZzoxMHB4O2JhY2tncm91bmQtY29sb3I6I2Y0ZjRmNH0uY29udGVudCAuZGV0YWlse21hcmdpbi10b3A6MTBweDtsaW5lLWhlaWdodDoxLjU7Zm9udC1zaXplOjE2cHh9LmNvbnRlbnQgLmRldGFpbCBpbWd7d2lkdGg6MTAwJX0uY29udGVudCAuZGV0YWlsIHB7bGluZS1oZWlnaHQ6MS41O3BhZGRpbmctYm90dG9tOjZweH0uY29udGVudCAuYXV0aG9ye21pbi1oZWlnaHQ6NThweDttYXgtaGVpZ2h0OjcwcHg7YmFja2dyb3VuZC1jb2xvcjojZTJlMWUxO2JvcmRlci10b3A6c29saWQgMXB4ICNlOWU5ZTk7Ym9yZGVyLWJvdHRvbTpzb2xpZCAxcHggI2U5ZTllOTtwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6MTRweDtvdmVyZmxvdzpoaWRkZW59LmNvbnRlbnQgLmF1dGhvciAuaGVhZEltZ3tmbG9hdDpsZWZ0O21hcmdpbi10b3A6OHB4O21hcmdpbi1sZWZ0OjZweDt3aWR0aDo0NHB4O2hlaWdodDo0NHB4Oy13ZWJraXQtYm9yZGVyLXJhZGl1czoyMnB4fS5jb250ZW50IC5hdXRob3IgLmF1dGhvck5hbWV7em9vbToxO292ZXJmbG93OmhpZGRlbjttYXJnaW46NXB4O3BhZGRpbmctbGVmdDoxMHB4O3dpZHRoOmF1dG99LmNvbnRlbnQgLmF1dGhvciAuYXV0aG9yRGVzY3JpcHRpb257Zm9udC1zaXplOjExcHg7Y29sb3I6Izg4ODtsaW5lLWhlaWdodDoxNHB4O21hcmdpbjowfS5nb3tiYWNrZ3JvdW5kLWNvbG9yOiNmZjZkMDA7aGVpZ2h0OjQwcHg7Zm9udC1zaXplOjIwcHg7Y29sb3I6I2ZmZjt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDo0MHB4O2JvcmRlci10b3A6MXB4IHNvbGlkIHJnYmEoMjU1LDEwOSwwLC42KX0uZ28gLnJlZmVyLTEsLmdvIC5yZWZlci0yLC5nbyAucmVmZXItNSwuZ28gLnJlZmVyLTh7YmFja2dyb3VuZC1zaXplOmF1dG8gMTAwJTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbi14OjEwMCV9LmdvIC5yZWZlci0xe2JhY2tncm91bmQtaW1hZ2U6dXJsKGltYWdlcy9pY29uX2NzLnBuZyl9LmdvIC5yZWZlci0ye2JhY2tncm91bmQtaW1hZ2U6dXJsKGltYWdlcy9pY29uX2FjdGl2aXR5LnBuZyl9LmdvIC5yZWZlci01e2JhY2tncm91bmQtaW1hZ2U6dXJsKGltYWdlcy9pY29uX2FjY291bnQucG5nKX0uZ28gLnJlZmVyLTh7YmFja2dyb3VuZC1pbWFnZTp1cmwoaW1hZ2VzL2ljb25fbGl2ZS5wbmcpfVwiKTtcbnZhciBfX3Z1ZV90ZW1wbGF0ZV9fID0gXCI8ZGl2IGNsYXNzPVxcXCJ0b3BcXFwiPjxkaXYgY2xhc3M9XFxcInRpdGxlTGFiZWxcXFwiPnt7YXJ0aWNsZS50aXRsZX19PC9kaXY+PGRpdj48ZGl2IGNsYXNzPVxcXCJ0aW1lTGFiZWxcXFwiPnt7YXJ0aWNsZS5kaXNwbGF5VGltZX19PC9kaXY+PGRpdiB2LXNob3c9XFxcImFydGljbGUuaGl0Q291bnRcXFwiIGNsYXNzPVxcXCJwYWdlVmlld1xcXCI+5rWP6KeI6YePOiB7e2FydGljbGUuaGl0Q291bnR9fTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcInNlcGFyYXRvckxpbmVcXFwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XFxcImNvbnRlbnRcXFwiPjxkaXYgY2xhc3M9XFxcImF1dGhvclxcXCI+PGltZyBzcmM9XFxcInt7YXJ0aWNsZS5hdXRob3IuaW1nfX1cXFwiIGNsYXNzPVxcXCJoZWFkSW1nXFxcIj48ZGl2IGNsYXNzPVxcXCJhdXRob3JOYW1lXFxcIj48c3BhbiBzdHlsZT1cXFwiY29sb3I6IzIzNTM4MlxcXCI+e3thcnRpY2xlLmF1dGhvci5uYW1lfX08L3NwYW4+PGRpdiBjbGFzcz1cXFwiYXV0aG9yRGVzY3JpcHRpb25cXFwiPnt7YXJ0aWNsZS5hdXRob3IuZGVzY319PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cXFwiZGV0YWlsXFxcIj57e3thcnRpY2xlLmNvbnRlbnR9fX08L2Rpdj48L2Rpdj48ZGl2IHYtdG91Y2g9XFxcInRhcDpvblRhcFxcXCIgdi1zaG93PVxcXCJhcnRpY2xlLnJlZmVyXFxcIiBjbGFzcz1cXFwiZ29cXFwiPiA8c3BhbiBjbGFzcz1cXFwicmVmZXIte3thcnRpY2xlLnJlZmVyZW5jZVR5cGV9fVxcXCI+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7PC9zcGFuPiZuYnNwOyZuYnNwO3t7YXJ0aWNsZS5yZWZlcn19PC9kaXY+PGRpdiBjbGFzcz1cXFwiZm9vdFxcXCI+PC9kaXY+XCI7XG52YXIgdmlld01vZHVsZTtcblxuJChmdW5jdGlvbigpIHtcbiAgdmFyIHRlc3RBcnRpY2xlO1xuICBpZiAoZW52ID09PSBcImRldmVsb3BtZW50XCIpIHtcbiAgICB0ZXN0QXJ0aWNsZSA9IHtcbiAgICAgIGlkOiAxLFxuICAgICAgY3JlYXRlVGltZTogMTQyMTIwNzE5MTY5NCxcbiAgICAgIHVwZGF0ZVRpbWU6IDE0MjEyMDcxOTE2OTQsXG4gICAgICB0aXRsZTogXCLku47mlLnpnanmtarmva7kuK3otbDlh7rnmoTkur/kuIflr4znv4FcIixcbiAgICAgIHN1YnRpdGxlOiBcIui/memHjOaYr+WJr+agh+mimFwiLFxuICAgICAgaW50cm9kdWN0aW9uOiBcIui/memHjOaYr+aRmOimgVwiLFxuICAgICAgY29udGVudDogJzxwPjxzcGFuIHN0eWxlPVwiY29sb3I6ICNmZjAwMDBcIj48c3Ryb25nPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiBtZWRpdW1cIj4mbmJzcDsmbmJzcDsmbmJzcDsg57yW6ICF5oyJ77ya5LuO5pyI57q/55yL77yM6Ieq5Y675bm0MTDmnIjku6XmnaXvvIzpk7bku7flt7Lnu48xNOS4quaciOi/nue7reS4i+i3jO+8jOWFqOauteacgOWkp+i3jOW5hei/kTQ5LjUyJe+8jOWPr+iwk+aWqeiFsOi/keWNiuaIkO+8jOS7iuWkqeWPiOWIsOaciOacq++8jOmihOiuoeeZvemTtuaciOe6v+WPiOWwhuaUtumYtOOAgjwvc3Bhbj48L3N0cm9uZz48L3NwYW4+PC9wPiA8cD48c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogbWVkaXVtXCI+Jm5ic3A7Jm5ic3A7Jm5ic3A7PC9zcGFuPjxzdHJvbmc+PHNwYW4gc3R5bGU9XCJjb2xvcjogIzAwMDBmZlwiPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiBtZWRpdW1cIj4g5pel5YaF6KGM5oOF77yaPC9zcGFuPjwvc3Bhbj48L3N0cm9uZz48L3A+IDxwPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiBtZWRpdW1cIj4mbmJzcDsmbmJzcDsmbmJzcDsg55uY5LitMTU6MzAtMTY6MTDpmLbmrrXvvIznjrDotKfnmb3pk7blv6vpgJ/mi4nljYfov5ExJe+8jOWGjeasoeWbnuWIsDM5MDDkuIrmlrnvvIzmtojmga/pnaLkuIrlubbmsqHmnInku7vkvZXlvLrlipvmlK/mkpHnmb3pk7bkuIrmtqjnmoTnkIbnlLHjgILnqI3mmZrml7blgJnlhazluIPnmoTmrKflhYPljLpDUEnlj4rlpLHkuJrnjoflnYflpb3kuo7pooTmnJ/vvIzkvYbnmb3pk7blj43lupTlubPmt6HvvIznm67liY3kuqTmipXkuo4zOTE46ZmE6L+R44CCPC9zcGFuPjwvcD4gPHA+PHNwYW4gc3R5bGU9XCJmb250LXNpemU6IG1lZGl1bVwiPiZuYnNwOyZuYnNwOyZuYnNwOyA8L3NwYW4+PHNwYW4gc3R5bGU9XCJjb2xvcjogIzAwMDBmZlwiPjxzdHJvbmc+PHNwYW4gc3R5bGU9XCJmb250LXNpemU6IG1lZGl1bVwiPuaVsOaNruaYvuekuu+8mjwvc3Bhbj48L3N0cm9uZz48L3NwYW4+PC9wPiA8cD48c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogbWVkaXVtXCI+Jm5ic3A7Jm5ic3A7Jm5ic3A7IOasp+WFg+WMujEx5pyIQ1BJ5Yid5YC85pyI546HKzAuOSXvvIzpooTmnJ8rMC44Je+8jOWJjeWAvCswLjcl44CCPC9zcGFuPjwvcD4gPHA+PHNwYW4gc3R5bGU9XCJmb250LXNpemU6IG1lZGl1bVwiPiZuYnNwOyZuYnNwOyZuYnNwOyDmrKflhYPljLoxMeaciOaguOW/g0NQSeaciOeOhysxLjAl77yM6aKE5pyfKzAuOSXvvIzliY3lgLwrMC44JeOAgjwvc3Bhbj48L3A+IDxwPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiBtZWRpdW1cIj4mbmJzcDsmbmJzcDsmbmJzcDsg5qyn5YWD5Yy6MTDmnIjlpLHkuJrnjocxMi4xJe+8jOmihOacnzEyLjIl77yM5YmN5YC8MTIuMiXjgII8L3NwYW4+PC9wPiA8cD48c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogbWVkaXVtXCI+Jm5ic3A7Jm5ic3A7PC9zcGFuPjxzcGFuIHN0eWxlPVwiY29sb3I6ICMwMDAwZmZcIj48c3Ryb25nPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiBtZWRpdW1cIj4mbmJzcDsg5biC5Zy65aOw6Z+z77yaPC9zcGFuPjwvc3Ryb25nPjwvc3Bhbj48L3A+IDxwPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiBtZWRpdW1cIj4mbmJzcDsmbmJzcDsmbmJzcDsg6L+R5pyf77yM576O5Zu9UUXkuonorrrmnKrmtojvvIzmrKfmtLLnu4/mtY7pl67popjlho3otbfjgILmrKflhYPljLrnu4/mtY7mlbDmja7nmoTmlbTkvZPpgKDlvLHku6TluILlnLrlsaHlsaHkvKDlh7rmrKflpK7ooYzmnInmnLrkvJrmjqjooYzov5vkuIDmraXlrr3mnb7mlL/nrZbvvIzomb3kuYvlkI7lpK7ooYzlr7nmraTov5vooYzovp/osKPvvIzkvYbkuZ/mmL7npLrmipXotYTogIXmiJblubbkuI3nnIvlpb3mrKfmtLLnu4/mtY7liY3mma/jgILliJrlh7rngonnmoTmrKflhYPljLpDUEnlj4rlpLHkuJrnjofmlbDmja7ooajnjrDlnYfoia/lpb3vvIzpooTorqHkvJrov5vkuIDmraXmiZPmtojluILlnLrlr7nmrKflhYPljLrov5vkuIDmraXmjqjooYzlrr3mnb7mlL/nrZbnmoTpob7omZHvvIzmj5DmjK/mrKflhYPvvIzliKnlpb3otLXph5HlsZ7jgII8L3NwYW4+PC9wPiA8cD48c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogbWVkaXVtXCI+Jm5ic3A7Jm5ic3A7Jm5ic3A7PC9zcGFuPjxzcGFuIHN0eWxlPVwiY29sb3I6ICNmZjAwMDBcIj48c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogbWVkaXVtXCI+IOasp+WFg+WMuumHjeimgeaVsOaNruW3suWFrOW4g++8jOaZmumXtOaXoOmHjeWkp+aVsOaNruOAgjwvc3Bhbj48L3NwYW4+PC9wPiA8cD48c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogbWVkaXVtXCI+Jm5ic3A7Jm5ic3A7Jm5ic3A7PC9zcGFuPjxzcGFuIHN0eWxlPVwiY29sb3I6ICMwMDAwZmZcIj48c3Ryb25nPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiBtZWRpdW1cIj4g5pma6Ze05pON5L2c5bu66K6u77yaPC9zcGFuPjwvc3Ryb25nPjwvc3Bhbj48L3A+IDxwPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiBtZWRpdW1cIj4mbmJzcDsmbmJzcDsmbmJzcDsg5Zug5oSf5oGp6IqC77yM5YyX576O5biC5Zy65bCG5o+Q5YmN5LyR5biC77yM5qyn5YWD5Yy65pWw5o2u5o+Q5oyv5biC5Zy65L+h5b+D77yM5r+A6L+b6ICF5Y+v5LqOPHNwYW4gc3R5bGU9XCJjb2xvcjogI2ZmMDAwMFwiPjxzdHJvbmc+MzkwNTwvc3Ryb25nPjwvc3Bhbj7pmYTov5Hovbvku5PlgZrlpJrvvIzmraLmjZ88c3BhbiBzdHlsZT1cImNvbG9yOiAjZmYwMDAwXCI+PHN0cm9uZz4zODY1PC9zdHJvbmc+PC9zcGFuPu+8jOebruaghzxzcGFuIHN0eWxlPVwiY29sb3I6ICNmZjAwMDBcIj48c3Ryb25nPjQwMDU8L3N0cm9uZz48L3NwYW4+44CCPC9zcGFuPjwvcD4gPHA+PHNwYW4gc3R5bGU9XCJmb250LXNpemU6IG1lZGl1bVwiPiZuYnNwOyZuYnNwOyZuYnNwOyA8L3NwYW4+PHNwYW4gc3R5bGU9XCJjb2xvcjogI2ZmMDAwMFwiPjxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiBtZWRpdW1cIj7mmZrpl7TnrZbnlaXvvIzmlZnmgqjmiormj6Hnm4jliKnmnLrkvJo8L3NwYW4+PC9zcGFuPjwvcD4gPHA+PHNwYW4gc3R5bGU9XCJmb250LXNpemU6IG1lZGl1bVwiPiZuYnNwOyZuYnNwOyZuYnNwOzwvc3Bhbj48c3BhbiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNjY2ZmY2NcIj48c3BhbiBzdHlsZT1cImNvbG9yOiAjZmYwMDAwXCI+PHN0cm9uZz48c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogbWVkaXVtXCI+IOa4qemmqOaPkOekuu+8muS7peS4iuW7uuiuruS7heS+m+WPguiAg+OAguaDs+efpemBk+abtOWkmuWFt+S9k+aTjeS9nOW7uuiurueahO+8jOivt+i/m+mTtuWkqeS4i+ebtOaSreWupO+8jDU35LiT5a625pe25Yi75Zyo57q/77yM5Li65oKo5YWo6Z2i6Kej5p6Q6KGM5oOF77yM57K+56Gu5o6M5o+h5bu65LuT5pe25py677yM5a6e546w5oKo55qE5Yip5ram5pyA5aSn5YyW77yBPC9zcGFuPjwvc3Ryb25nPjwvc3Bhbj48L3NwYW4+PC9wPiA8cCBzdHlsZT1cInRleHQtYWxpZ246IHJpZ2h0XCI+PHNwYW4gc3R5bGU9XCJmb250LXNpemU6IG1lZGl1bVwiPiZuYnNwOyZuYnNwOyZuYnNwOyDvvIjnvJbovpEv5pa55oms77yJPC9zcGFuPjwvcD4nLFxuICAgICAgc3RhdGU6IFwiUFVCTElTSEVEXCIsXG4gICAgICByZWZlcmVuY2VUeXBlOiBcIjJcIixcbiAgICAgIHJlZmVyZW5jZUlkOiBcIjE5NVwiLFxuICAgICAgaGl0Q291bnQ6IDEyMyxcbiAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAga2V5MzogXCJ2YWwzXCIsXG4gICAgICAgIGtleTI6IFwidmFsMlwiLFxuICAgICAgICBrZXkxOiBcInZhbDFcIlxuICAgICAgfSxcbiAgICAgIHB1Ymxpc2hUaW1lOiAxNDIxMjA3MTkxNjk0LFxuICAgICAgcHVibGlzaFRpbWVNczogMTQyMTIwNzE5MTY5NCxcbiAgICAgIGF1dGhvcjoge1xuICAgICAgICBpZDogMSxcbiAgICAgICAgY3JlYXRlVGltZTogMTQyMTIwNzE5MTY5NSxcbiAgICAgICAgdXBkYXRlVGltZTogMTQyMTIwNzE5MTY5NSxcbiAgICAgICAgbmFtZTogXCLmlrnmiaxcIixcbiAgICAgICAgaW50cm9kdWN0aW9uOiBcIuiHqui4j+WFpei0temHkeWxnuihjOS4muWNs+a9nOW/g+eglOeptuWfuuacrOmdou+8jOWkmuW5tOeahOmSu+eglOS9v+W+l+WvueWfuuacrOmdoueahOWIhuaekOaAu+e7k+ebuOW9k+eLrOWIsOOAglwiLFxuICAgICAgICBhdHRybG9nbzogXCJodHRwOi8vd3d3LmJhaWRhby5jb20vc3RhdGljL290aGVyL3VzZXIvdXBsb2FkL3d3dy8yMDEzMDkvMTcxNTExNDBxZ3FyLmpwZ1wiXG4gICAgICB9LFxuICAgICAgY29sdW1uczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgY3JlYXRlVGltZTogMTQyMTIwNzE5MTY5NSxcbiAgICAgICAgICB1cGRhdGVUaW1lOiAxNDIxMjA3MTkxNjk1LFxuICAgICAgICAgIG5hbWU6IFwi5qCP55uu5LiAXCIsXG4gICAgICAgICAgaW50cm9kdWN0aW9uOiBcIuagj+ebrueugOS7i1wiLFxuICAgICAgICAgIHJlbWFya3M6IFwi5aSH5rOoXCIsXG4gICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAga2V5MzogXCJ2YWwzXCIsXG4gICAgICAgICAgICBrZXkyOiBcInZhbDJcIixcbiAgICAgICAgICAgIGtleTE6IFwidmFsMVwiXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgdGFnczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6IDEsXG4gICAgICAgICAgY3JlYXRlVGltZTogMTQyMTIwNzE5MTY5NixcbiAgICAgICAgICB1cGRhdGVUaW1lOiAxNDIxMjA3MTkxNjk2LFxuICAgICAgICAgIG5hbWU6IFwi5qCH562+5LiAXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgIGlkOiAyLFxuICAgICAgICAgIGNyZWF0ZVRpbWU6IDE0MjEyMDcxOTE2OTYsXG4gICAgICAgICAgdXBkYXRlVGltZTogMTQyMTIwNzE5MTY5NixcbiAgICAgICAgICBuYW1lOiBcIuagh+etvuS6jFwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5ZVFhCcmlkZ2UuZmlyZUV2ZW50KCd5dHg6bGlzdDpyZWZyZXNoJywgdGVzdEFydGljbGUpO1xuICAgIH0sIDIwKTtcbiAgfVxufSk7XG5cbnZpZXdNb2R1bGUgPSB7XG4gIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcnRpY2xlSWQ7XG4gICAgYXJ0aWNsZUlkID0gZ2V0UXVlcnlBcmdCeU5hbWUoXCJpZFwiKTtcbiAgICBpZiAoYXJ0aWNsZUlkKSB7XG4gICAgICByZXR1cm4gJC5nZXRKU09OKFwiXCIgKyBzZXJ2aWNlVXJsLm1vYmlsZV9zZXJ2ZXIgKyBcIi9hZ2dyZWdhdGUvYXJ0aWNsZT9pZD1cIiArIGFydGljbGVJZCwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgX3RoaXMuaGFuZGxlRGF0YShkYXRhKTtcbiAgICAgICAgICByZXR1cm4gcmVuZGVyRG93bmxvYWQoKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFlUWEJyaWRnZS5hZGRFdmVudExpc3RlbmVyKFwieXR4Omxpc3Q6cmVmcmVzaFwiLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgX3RoaXMuaGFuZGxlRGF0YShkYXRhKTtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIgPyBjYWxsYmFjaygpIDogdm9pZCAwO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH1cbiAgfSxcbiAgYXR0YWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLiRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgaW1hZ2VzLCBpbWcsIHJlZmVyZW5jZTtcbiAgICAgICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUudG9VcHBlckNhc2UoKSAhPT0gXCJJTUdcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpbWFnZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0cztcbiAgICAgICAgICBfcmVmID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvckFsbChcIi5kZXRhaWwgaW1nXCIpO1xuICAgICAgICAgIF9yZXN1bHRzID0gW107XG4gICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICBpbWcgPSBfcmVmW19pXTtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goaW1nLnNyYyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkuY2FsbChfdGhpcyk7XG4gICAgICAgIHJlZmVyZW5jZSA9IHtcbiAgICAgICAgICB0eXBlOiAxMDEsXG4gICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICB1cmxzOiBpbWFnZXMsXG4gICAgICAgICAgICBpbmRleDogaW1hZ2VzLmluZGV4T2YoZS50YXJnZXQuc3JjKVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFlUWEJyaWRnZS5maXJlRXZlbnQoXCJ5dHg6bmF2aWdhdGVcIiwgcmVmZXJlbmNlKTtcbiAgICAgIH07XG4gICAgfSkodGhpcyksIGZhbHNlKTtcbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGhhbmRsZURhdGE6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHl0eC5oaXQoZGF0YS5pZCk7XG4gICAgICB0aGlzLmFydGljbGUgPSB7XG4gICAgICAgIGRpc3BsYXlUaW1lOiBtb21lbnQoZGF0YS5wdWJsaXNoVGltZU1zKS5mb3JtYXQoJ1lZWVktTU0tREQgLCBIOm1tJyksXG4gICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgIGltZzogZGF0YS5hdXRob3IuYXR0cmxvZ28sXG4gICAgICAgICAgbmFtZTogZGF0YS5hdXRob3IubmFtZSxcbiAgICAgICAgICBkZXNjOiBkYXRhLmF1dGhvci5pbnRyb2R1Y3Rpb25cbiAgICAgICAgfSxcbiAgICAgICAgaGl0Q291bnQ6IGRhdGEuaGl0Q291bnQsXG4gICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnQsXG4gICAgICAgIHJlZmVyZW5jZVR5cGU6IGRhdGEucmVmZXJlbmNlVHlwZVxuICAgICAgfTtcbiAgICAgIGlmICghZGF0YS5yZWZlcmVuY2VUeXBlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoZGF0YS5yZWZlcmVuY2VUeXBlKSB7XG4gICAgICAgIGNhc2UgXCIyXCI6XG4gICAgICAgICAgJC5nZXRKU09OKFwiXCIgKyBzZXJ2aWNlVXJsLm1vYmlsZV9zZXJ2ZXIgKyBcIi9hY3Rpdml0eS9cIiArIGRhdGEucmVmZXJlbmNlSWQsIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgX3RoaXMuYXJ0aWNsZS5yZWZlcmVuY2VEYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFydGljbGUucmVmZXIgPSBkYXRhLnJlZmVyZW5jZURlc2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKHRoaXMpKS5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBhbGVydChcIuiOt+WPlua0u+WKqOS/oeaBr+Wksei0pVwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmFydGljbGUucmVmZXIgPSBkYXRhLnJlZmVyZW5jZURlc2M7XG4gICAgfSxcbiAgICBvblRhcDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVmZXJlbmNlLCBfcmVmO1xuICAgICAgaWYgKCF0aGlzLmFydGljbGUucmVmZXJlbmNlVHlwZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIXBhcnNlSW50KHRoaXMuYXJ0aWNsZS5yZWZlcmVuY2VUeXBlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZWZlcmVuY2UgPSB7XG4gICAgICAgIHR5cGU6IHBhcnNlSW50KHRoaXMuYXJ0aWNsZS5yZWZlcmVuY2VUeXBlKSxcbiAgICAgICAgZGV0YWlsOiAoX3JlZiA9IHRoaXMuYXJ0aWNsZS5yZWZlcmVuY2VEYXRhKSAhPSBudWxsID8gX3JlZiA6IHt9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIFlUWEJyaWRnZS5maXJlRXZlbnQoXCJ5dHg6bmF2aWdhdGVcIiwgcmVmZXJlbmNlKTtcbiAgICB9XG4gIH0sXG4gIGRhdGE6IHtcbiAgICBhcnRpY2xlOiB7fVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHZpZXdNb2R1bGU7XG5cbm1vZHVsZS5leHBvcnRzLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfXztcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIGFwcE9wdGlvbnM7XG5cbmFwcE9wdGlvbnMgPSByZXF1aXJlKCcuL2FydGljbGUudnVlJyk7XG5cbndpbmRvdy5vbkJyaWRnZVJlYWR5KGZ1bmN0aW9uKCkge1xuICB2YXIgYXBwO1xuICByZXR1cm4gYXBwID0gbmV3IFZ1ZShhcHBPcHRpb25zKS4kbW91bnQoJyNhcHAnKTtcbn0pO1xuIiwidmFyIGluc2VydGVkID0ge307XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcywgb3B0aW9ucykge1xuICAgIGlmIChpbnNlcnRlZFtjc3NdKSByZXR1cm47XG4gICAgaW5zZXJ0ZWRbY3NzXSA9IHRydWU7XG4gICAgXG4gICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIGVsZW0uc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7XG5cbiAgICBpZiAoJ3RleHRDb250ZW50JyBpbiBlbGVtKSB7XG4gICAgICBlbGVtLnRleHRDb250ZW50ID0gY3NzO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgICB9XG4gICAgXG4gICAgdmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucHJlcGVuZCkge1xuICAgICAgICBoZWFkLmluc2VydEJlZm9yZShlbGVtLCBoZWFkLmNoaWxkTm9kZXNbMF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgfVxufTtcbiJdfQ==